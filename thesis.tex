\documentclass[a4paper,11pt]{kth-mag}
\usepackage{textcomp}
\usepackage[table]{xcolor}
\usepackage[hidelinks]{hyperref}
\usepackage{todonotes}
\usepackage{lmodern}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage[swedish,english]{babel}
\usepackage{modifications}
\usepackage{multirow}
\usepackage{textcomp}
\usepackage{listings}
\usepackage{color}
\usepackage{amssymb}
\usepackage{dirtree}
\usepackage{array}
\usepackage{pdfpages}
\usepackage{longtable}
\usepackage{siunitx}
\usepackage{nameref}
\usepackage{url}
\usepackage{xcolor}
\usepackage{comment}
\usepackage{graphicx}
\usepackage{float}
\usepackage[square,sort,comma,numbers]{natbib}
\usepackage{amsmath, amssymb}
\usepackage{changepage}
\usepackage{mleftright}
\usepackage{mathtools}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{enumitem}
\usepackage{algorithm}
\usepackage[]{algpseudocode}
\usepackage{mwe}
\hbadness=99999
% For nomenclature
\usepackage{etoolbox}
\usepackage{nomencl}
\usepackage{caption}
\usepackage{subfig}
\makenomenclature
% For pseudo algorithm code
\makeatletter
\def\BState{\State\hskip-\ALG@thistlm}
\makeatother
 

\extrafloats{1000}


\title{Comparison Between a Model Based and Data Based Controller Approach for a Mobile Sink in a Wireless Sensor Network}

\subtitle{Thesis WIP}
\foreigntitle{Title in Swedish goes here}

\author{Axel Karlsson \\ Bohan Zhou}
\date{\today}
\blurb{Master's Thesis at ITM\\Supervisor: Tong Liu \\ Examiner: Dejiu Chen}
\trita{TRITA xxx yyyy-nn}


\begin{document}
\frontmatter
\pagestyle{empty}
%\removepagenumbers
\maketitle
\selectlanguage{english}


\clearpage
\begin{abstract}
\input{Text/abstractENG.tex}
\end{abstract}
\clearpage
\begin{foreignabstract}{swedish}

\input{Text/abstractSWE.tex}

\end{foreignabstract}
\clearpage

\chapter*{Acknowledgements}

\noindent We would like to thank the Mechatronics Department at KTH and especially our supervisor Tong Liu for the support provided during the thesis work. We truly appreciated your knowledge and contribution towards completing the thesis. A large gratitude goes to our examiner Dejiu Chen for helping us answer the research question and our thesis coordinator Fredrik Asplund for guiding us to the field of research. We would also like to thank Cybercom and our industrial supervisor Karl Hansen for fruitful discussions and supervision throughout the project. \newline
\newline 
\noindent Thanks also to John Hedengren from Brigham Young University for providing continous support for the GEKKO optimization suite. \newline
\newline   
\noindent Finally thanks to our colleagues, friends and family for being there when it mattered the most. 

    
\begin{flushright}
   Axel Karlsson \& Bohan Zhou \\
   Stockholm, July 2019   
\end{flushright} 

    

\clearpage
\tableofcontents*
\clearpage
\listoffigures*
\clearpage
\listoftables*

\makenomenclature
\renewcommand\nomgroup[1]{
  \item[\bfseries
  \ifstrequal{#1}{T}{Terminology}{\ifstrequal{#1}{S}{Symbols}{\ifstrequal{#1}{A}{Abbreviation}}}]}


\setlength{\nomlabelwidth}{5cm}
% Terminology
\nomenclature[T]{Cycle}{Sequence of transmission rounds before the LEACH protocol resets.}
\nomenclature[T]{Episode}{One run of the WSN environment from creating the WSN environment until all node are dead}
\nomenclature[T]{Reward}{Given to the agent in RL to promote desired behaviour}

% Abbreviations
\nomenclature[A]{$WSN$}{Wireless sensor network}
\nomenclature[A]{$CH$}{Cluster head}
\nomenclature[A]{$MPC$}{Model predictive control}
\nomenclature[A]{$NMPC$}{Nonlinear model predictive control}
\nomenclature[A]{$RL$}{Reinforcement learning}
\nomenclature[A]{$LEACH$}{Low-energy adaptive clustering hierarchy}
\nomenclature[A]{$BLEACH$}{Broadened LEACH}
\nomenclature[A]{$SoC$}{State of charge}
\nomenclature[A]{$MIL$}{Model in loop}
\nomenclature[A]{$NN$}{Neural network}
\nomenclature[A]{$DQN$}{Deep Q-network}
\nomenclature[A]{$MAE$}{Mean absolute error}
\nomenclature[A]{$CHS$}{Cluster head status}
\nomenclature[A]{$EC$}{Energy consumed}
\nomenclature[A]{$PR$}{Packet rate}
\nomenclature[A]{$ULC$}{Upper layer control}
\nomenclature[A]{$LLC$}{Lower layer control}
\nomenclature[A]{$API$}{Application Programming Interface}




% Symbols
\nomenclature[S]{$\alpha$}{Learning Rate}
\nomenclature[S]{$\epsilon$}{Exploration rate}
\nomenclature[S]{$\gamma$}{Learning rate}
\nomenclature[S]{$n$}{Current transmission round}
\nomenclature[S]{$P$}{Percentual CH distribution for LEACH}
\nomenclature[S]{$T$}{LEACH/BLEACH value function}
\nomenclature[S]{$E_{Tx}$}{Energy transmitted by a node during a time segment}
\nomenclature[S]{$E_{Rx}$}{Energy received by a node during a time segment}
\nomenclature[S]{$E_{gen}$}{Energy generated by a node during a time segment}
\nomenclature[S]{$J$}{Objective function}
\nomenclature[S]{$J*$}{Optimal value of objective function}
\nomenclature[S]{$K$}{Discrete step horizon length}
\nomenclature[S]{$\mathcal{R}$}{Reward set}
\nomenclature[S]{$\mathcal{A}$}{Action set}
\nomenclature[S]{$\textbf{x}$}{State vector}
\nomenclature[S]{$\textbf{u}$}{Control vector}
\nomenclature[S]{$PPJ$}{Packets per joule}
\nomenclature[S]{$PA$}{Packet amount}


\printnomenclature
\mainmatter
\pagestyle{newchap}

\chapter{Introduction}
\input{Text/Introduction.tex}


\chapter{Literature Review}
\input{Text/LiteratureReview.tex}

\chapter{Implementation}
\input{Text/Implementation.tex}

\chapter{Methodology}
\input{Text/Methodology.tex}

\chapter{Results}
\input{Text/Results.tex}

\chapter{Discussion and Conclusions}
\input{Text/DiscussionConclusions.tex}

\chapter{Recommendations and Future Work} 
\input{Text/RecommendationsFutureWork.tex}



\pagebreak
\bibliographystyle{ieeetr}
\bibliography{references}

\appendix
\addappheadtotoc

\chapter{WSN Environment}

The figures below show the WSN environment that was built by the authors. 

\noindent \textcolor{red}{TODO: Put picture of WSN here}




\end{document}
